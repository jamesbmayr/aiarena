<!DOCTYPE html>
<html>
	<head>
		<title>ai_arenas.<% data.name || "users" %></title>
		<link rel="shortcut icon" type="image/png" href="<% assets('logo') %>"/>
		<link rel="stylesheet" type="text/css" href="<% assets('bootstrap') %>"/>
		<link rel="stylesheet" type="text/css" href="stylesheet.css"/>
		<script type="text/javascript" src="<% assets('jquery') %>"></script>
		<script type="text/javascript" src="script.js"></script>
	</head>
	<body>
		<% var message = "<span class='message graytext'></span>"; navbar(session); %>
		<div class="container" value="<% data.id %>">
			<div class="section">
				<span class="whitetext header" id="name"><% data.name %></span> <span class="graytext" id="message_top"></span>
			</div>
			<div class="indented">
				<%
					if ((session.user !== null) && (session.user.id === data.id)) {
						"<div class='megasection'><div class='section'>\
							<button id='user_edit'><span class='whitetext'>.</span><span class='greentext'>edit</span><span class='whitetext'>();</span></button>\
						</div>\
						<div class='section'>\
							<button id='user_save' style='display: none'><span class='whitetext'>.</span><span class='greentext'>save</span><span class='whitetext'>();</span></button>\
						</div>\
						<div class='section'>\
							<button id='user_cancel' style='display: none'><span class='whitetext'>.</span><span class='greentext'>cancel</span><span class='whitetext'>();</span></button>\
						</div></div>";
					}
				%>
				<span class="glyphicon glyphicon-chevron-down section-toggle section-toggle-down whitetext"></span>
				<hr>
				<div class="megasection">
					<div class="section">
						<span class="whitetext">.email</span><span class="redtext"> = </span><a class="bluetext" id="email" href="mailto:<% data.email %>"><% data.email %></a>
						<span class="whitetext">;</span>
					</div>
					<div class="section">
						<span class="whitetext">.joined</span><span class="redtext"> = </span><span class="purpletext"><% new Date(data.created).toLocaleString(); %></span>
						<span class="whitetext">;</span>
					</div>
					<div class="section">
						<span class="whitetext">.statistics</span><span class="redtext"> = </span><span class="whitetext">{</span>
						<div class="indented">
							<span class="whitetext">wins: </span><span class="purpletext"><% Object.keys(data.statistics.wins).length || 0 %></span>
							<span class='whitetext'>,</span><br>
							<span class="whitetext">losses: </span><span class="purpletext"><% Object.keys(data.statistics.losses).length || 0 %></span>
						</div>
						<span class="whitetext">};</span>
					</div>
				</div>
				<span class="glyphicon glyphicon-chevron-down section-toggle section-toggle-down whitetext"></span>
				<hr>
				<div class="megasection">
					<div class="section" id="avatar">
						<span class="whitetext">.avatar</span><span class="redtext"> = </span><span class="whitetext">{</span><% message %>
						<div class="indented">
							<pre id="avatar_pre" monospace value="<% data.avatar.color || 'var(--white)' %>" style="color: <% data.avatar.color || 'var(--white)' %>"><% data.avatar.ascii || "" %></pre>
						</div>
						<span class="whitetext">}</span>
					</div>
					<% 
						if ((session.user !== null) && (session.user.id === data.id)) {
							var display = '<div class="section" id="avatar_color" style="display: none; color: ' + (data.avatar.color || 'var(--white)') + '">\
								<span class="whitetext">.color</span><span class="redtext"> = </span><select>\
									<option value="var(--white)">white</option>\
									<option value="var(--red)">red</option>\
									<option value="var(--orange)">orange</option>\
									<option value="var(--yellow)">yellow</option>\
									<option value="var(--green)">green</option>\
									<option value="var(--blue)">blue</option>\
									<option value="var(--purple)">purple</option>\
									<option value="var(--gray)">gray</option>\
								</select><span class="whitetext">;</span>\
							</div>';

							display = display.replace('"' + data.avatar.color + '"', '"' + data.avatar.color + '"' + " selected");

							display;
						}
					%>
				</div>
				<span class="glyphicon glyphicon-chevron-down section-toggle section-toggle-down whitetext"></span>
				<hr>
				<div class="megasection">
					<div class="section">
						<span class="whitetext">.bio</span><span class="redtext"> = </span><span class="yellowtext">"</span><% message %>
						<div class="indented">
							<div class="field_frame">
								<span class="field yellowtext" id="bio" value="<% data.information.bio.replace(/\"/g, "&#34;").replace(/\'/g, "&#39;") || null %>"><% data.information.bio || "" %></span>
							</div>
						</div>
						<span class="yellowtext">"</span><span class="whitetext">;</span>
					</div>
				</div>
				<span class="glyphicon glyphicon-chevron-down section-toggle section-toggle-down whitetext"></span>
				<hr>
				<div class="megasection">
					<div class="section">
						<span class="whitetext">.robots</span><span class="redtext"> = </span><span class="whitetext">[</span>
						<div class="indented">
							<% 
								if ((session.user !== null) && (session.user.id === data.id)) {
									var robots = "<div class='section'>\
										<button id='user_create_robot'><span class='greentext'>create</span><span class='whitetext'>() ,</span></button>\
									</div>"
								}
								else {
									var robots = "";
								}

								for (var i = 0; i < data.robots.length; i++) {
									robots += "<a class='robot' id='" + data.robots[i].id + "' href='../../../../robots/" + data.robots[i].id + "'>\
										<span class='bluetext'>" + data.robots[i].name + "</span>\
									</a>\
									<span class='whitetext'>,</span><br>";
								}

								robots;
							%>
						</div>
						<span class="whitetext">];</span>
					</div>
				</div>
			</div>
		</div>
	</body>
</html>