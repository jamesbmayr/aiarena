<!DOCTYPE html>
<html>
	<head>
		<title>ai_arena.<% data.name || "robots" %></title>
		<link rel="shortcut icon" type="image/png" href="<% assets('logo') %>"/>
		<link rel="stylesheet" type="text/css" href="<% assets('bootstrap') %>"/>
		<link rel="stylesheet" type="text/css" href="stylesheet.css"/>
		<script type="text/javascript" src="<% assets('jquery') %>"></script>
		<script type="text/javascript" src="script.js"></script>
	</head>
	<body>
		<% navbar(session); %>
		<%
			if ((session.user !== null) && (session.user.id === data.user.id)) {
				var message = "<span class='message graytext'></span>";
			}
			else {
				var message = "";
			}
		%>
		<div id="container" value="<% data.id %>">
			<div class="section">
				<span class="field_frame"><span class="field whitetext" id="name" value="<% data.name %>"><% data.name %></span></span>
				<span class='message graytext' id='message_top'></span><% message %>
			</div>
			<div class="indented">
				<%
					if ((session.user !== null) && (session.user.id === data.user.id)) {
						"<div class='section'>\
							<button id='robot_edit'><span class='whitetext'>.</span><span class='greentext'>edit</span><span class='whitetext'>();</span></button>\
						</div>\
						<div class='section'>\
							<button id='robot_save' style='display: none'><span class='whitetext'>.</span><span class='greentext'>save</span><span class='whitetext'>();</span></button>\
						</div>\
						<div class='section'>\
							<button id='robot_confirm_delete' style='display: none'><span class='whitetext'>.</span><span class='greentext'>confirm_delete</span><span class='whitetext'>();</span></button>\
						</div>\
						<div class='section'>\
							<button id='robot_cancel' style='display: none'><span class='whitetext'>.</span><span class='greentext'>cancel</span><span class='whitetext'>();</span></button>\
						</div>\
						<div class='section'>\
							<button id='robot_delete' style='display: none'><span class='whitetext'>.</span><span class='greentext'>delete</span><span class='whitetext'>();</span></button>\
						</div>";
					}
				%>
				<span class="glyphicon glyphicon-chevron-down section-toggle section-toggle-down whitetext"></span>
				<hr>
				<div class="megasection">
					<div class="section">
						<span class="whitetext">.user</span><span class="redtext"> = </span><a class="bluetext" id="user" href="../../../../users/<% data.user.name %>"><% data.user.name %></a>
						<span class="whitetext">;</span>
					</div>
					<div class="section">
						<span class="whitetext">.created</span><span class="redtext"> = </span><span class="purpletext"><% new Date(data.created).toLocaleString(); %></span>
						<span class="whitetext">;</span>
					</div>
					<div class="section">
						<span class="whitetext">.statistics</span><span class="redtext"> = </span><span class="whitetext">{</span>
						<div class="indented">
							<span class="whitetext">wins: </span><span class="purpletext"><% Object.keys(data.statistics.wins).length || 0 %></span>
							<span class='whitetext'>,</span><br>
							<span class="whitetext">losses: </span><span class="purpletext"><% Object.keys(data.statistics.losses).length || 0 %></span>
						</div>
						<span class="whitetext">};</span>
					</div>
				</div>
				<span class="glyphicon glyphicon-chevron-down section-toggle section-toggle-down whitetext"></span>
				<hr>
				<div class="megasection">
					<div class="section">
						<span class="whitetext">.bio</span><span class="redtext"> = </span><span class="yellowtext">"</span><% message %>
							<div class="indented">
								<div class="field_frame"><span class="field yellowtext" id="bio" value="<% data.information.bio.replace(/\"/g, "&#34;").replace(/\'/g, "&#39;") || null %>"><% data.information.bio || null %></span></div>
							</div>
							<span class="yellowtext">"</span><span class="whitetext">;</span>
					</div>
				</div>
				<span class="glyphicon glyphicon-chevron-down section-toggle section-toggle-down whitetext"></span>
				<hr>
				<div class="megasection">
					<div class="section" id="avatar">
						<span class="whitetext">.avatar</span><span class="redtext"> = </span><% message %>
						<div class="indented">

<pre id="avatar_pre" monospace style="color: <% data.avatar.color || 'var(--white)' %>">
<span class="transparenttext">••••••</span><span class="avatar" id="avatar.antennae" value="<% data.avatar.antennae.replace(/\"/g, "&#34;").replace(/\'/g, "&#39;") || '•••••' %>"><% data.avatar.antennae || "•••••" %></span><span class="transparenttext">•••••</span>
<span class="transparenttext">•</span><span class="avatar" id="avatar.left_hand" value="<% data.avatar.left_hand.replace(/\"/g, "&#34;").replace(/\'/g, "&#39;") || '••••' %>"><% data.avatar.left_hand || "••••" %></span><span class="transparenttext">•</span><span class="avatar" id="avatar.eyes" value="<% data.avatar.eyes.replace(/\"/g, "&#34;").replace(/\'/g, "&#39;") || '•••••' %>"><% data.avatar.eyes || "•••••" %></span><span class="transparenttext">•••••</span>
<span class="transparenttext">•</span><span class="avatar" id="avatar.left_wrist" value="<% data.avatar.left_wrist.replace(/\"/g, "&#34;").replace(/\'/g, "&#39;") || '••••' %>"><% data.avatar.left_wrist || "••••" %></span><span class="transparenttext">•</span><span class="avatar" id="avatar.mouth" value="<% data.avatar.mouth.replace(/\"/g, "&#34;").replace(/\'/g, "&#39;") || '•••••' %>"><% data.avatar.mouth || "•••••" %></span><span class="transparenttext">•••••</span>
<span class="transparenttext">•••</span><span class="avatar" id="avatar.left_shoulder_up">\</span><span class="avatar" id="avatar.left_arm" value="<% data.avatar.left_arm.replace(/\"/g, "&#34;").replace(/\'/g, "&#39;") || '••' %>"><% data.avatar.left_arm || "••" %></span><span class="avatar" id="avatar.torso_1" value="<% data.avatar.torso_1.replace(/\"/g, "&#34;").replace(/\'/g, "&#39;") || '•••••' %>"><% data.avatar.torso_1 || "•••••" %></span><span class="avatar" id="avatar.right_arm" value="<% data.avatar.right_arm.replace(/\"/g, "&#34;").replace(/\'/g, "&#39;") || '••' %>"><% data.avatar.right_arm || "••" %></span><span class="avatar" id="avatar.right_shoulder_down">\</span><span class="transparenttext">••</span>
<span class="transparenttext">••••••</span><span class="avatar" id="avatar.torso_2" value="<% data.avatar.torso_2.replace(/\"/g, "&#34;").replace(/\'/g, "&#39;") || '•••••' %>"><% data.avatar.torso_2 || "•••••" %></span><span class="transparenttext">•</span><span class="avatar" id="avatar.right_wrist" value="<% data.avatar.right_wrist.replace(/\"/g, "&#34;").replace(/\'/g, "&#39;") || '••' %>"><% data.avatar.right_wrist || "••" %></span>
<span class="transparenttext">••••••</span><span class="avatar" id="avatar.torso_3" value="<% data.avatar.torso_3.replace(/\"/g, "&#34;").replace(/\'/g, "&#39;") || '•••••' %>"><% data.avatar.torso_3 || "•••••" %></span><span class="transparenttext">•</span><span class="avatar" id="avatar.right_hand" value="<% data.avatar.right_hand.replace(/\"/g, "&#34;").replace(/\'/g, "&#39;") || '••••' %>"><% data.avatar.right_hand || "••••" %></span>
<span class="transparenttext">•••••</span><span class="avatar" id="avatar.legs" value="<% data.avatar.legs.replace(/\"/g, "&#34;").replace(/\'/g, "&#39;") || '•••••••' %>"><% data.avatar.legs || "•••••••" %></span><span class="transparenttext">••••</span>
<span class="transparenttext">•••••</span><span class="avatar" id="avatar.left_foot" value="<% data.avatar.left_foot.replace(/\"/g, "&#34;").replace(/\'/g, "&#39;") || '•••' %>"><% data.avatar.left_foot || "•••" %></span><span class="transparenttext">•</span><span class="avatar" id="avatar.right_foot" value="<% data.avatar.right_foot.replace(/\"/g, "&#34;").replace(/\'/g, "&#39;") || '•••' %>"><% data.avatar.right_foot || "•••" %></span><span class="transparenttext">••••</span>
</pre>
							<% 
								if ((session.user !== null) && (session.user.id === data.user.id)) {
									var display = '\<div id="avatar_selection" style="color:' + (data.avatar.color || 'var(--white)') + '">\
										<span class="transparenttext">••••••</span><select id="select.antennae" class="avatar_select">';
											
												var options = avatar_sections("antennae");
												for (var i = 0; i < options.length; i++) {
													display += "<option value='" + options[i] + "'>" + options[i] + "</option>";
												}
											
										display += '</select><span class="transparenttext">•••••</span>\
										<br>\
										<span class="transparenttext">•</span><select id="select.left_hand" class="avatar_select">';
											
												var options = avatar_sections("hand");
												for (var i = 0; i < options.length; i++) {
													display += "<option value='" + options[i] + "'>" + options[i] + "</option>";
												}

										display += '</select><span class="transparenttext">•</span><select id="select.eyes" class="avatar_select">';
												
												var options = avatar_sections("eyes");
												for (var i = 0; i < options.length; i++) {
													display += "<option value='" + options[i] + "'>" + options[i] + "</option>";
												}
											
										display += '</select><span class="transparenttext">•••••</span>\
										<br>\
										<span class="transparenttext">•</span><select id="select.left_wrist" class="avatar_select">';

												var options = avatar_sections("wrist");
												for (var i = 0; i < options.length; i++) {
													display += "<option value='" + options[i] + "'>" + options[i] + "</option>";
												}
												
										display += '</select><span class="transparenttext">•</span><select id="select.mouth" class="avatar_select">';

												var options = avatar_sections("mouth");
												for (var i = 0; i < options.length; i++) {
													display += "<option value='" + options[i] + "'>" + options[i] + "</option>";
												}

										display += '</select><span class="transparenttext">•••••</span>\
										<br>\
										<span class="transparenttext">•••</span><span>\\</span><select id="select.left_arm" class="avatar_select">';

												var options = avatar_sections("arm");
												for (var i = 0; i < options.length; i++) {
													display += "<option value='" + options[i] + "'>" + options[i] + "</option>";
												}
										
										display += '</select><select id="select.torso_1" class="avatar_select">';

												var options = avatar_sections("torso");
												for (var i = 0; i < options.length; i++) {
													display += "<option value='" + options[i] + "'>" + options[i] + "</option>";
												}

										display += '</select><select id="select.right_arm" class="avatar_select">';

												var options = avatar_sections("arm");
												for (var i = 0; i < options.length; i++) {
													display += "<option value='" + options[i] + "'>" + options[i] + "</option>";
												}

										display += '</select><span>\\</span><span class="transparenttext">••</span>\
										<br>\
										<span class="transparenttext">••••••</span><select id="select.torso_2" class="avatar_select">';

												var options = avatar_sections("torso");
												for (var i = 0; i < options.length; i++) {
													display += "<option value='" + options[i] + "'>" + options[i] + "</option>";
												}

										display += '</select><span class="transparenttext">•</span><select id="select.right_wrist" class="avatar_select">';

												var options = avatar_sections("wrist");
												for (var i = 0; i < options.length; i++) {
													display += "<option value='" + options[i] + "'>" + options[i] + "</option>";
												}

										display += '</select>\
										<br>\
										<span class="transparenttext">••••••</span><select id="select.torso_3" class="avatar_select">';

												var options = avatar_sections("torso");
												for (var i = 0; i < options.length; i++) {
													display += "<option value='" + options[i] + "'>" + options[i] + "</option>";
												}

										display += '</select><span class="transparenttext">•</span><select id="select.right_hand" class="avatar_select">';

												var options = avatar_sections("hand");
												for (var i = 0; i < options.length; i++) {
													display += "<option value='" + options[i] + "'>" + options[i] + "</option>";
												}
										
										display += '</select>\
										<br>\
										<span class="transparenttext">•••••</span><select id="select.legs" class="avatar_select">';

												var options = avatar_sections("legs");
												for (var i = 0; i < options.length; i++) {
													display += "<option value='" + options[i] + "'>" + options[i] + "</option>";
												}
										
										display += '</select><span class="transparenttext">••••</span>\
										<br>\
										<span class="transparenttext">•••••</span><select id="select.left_foot" class="avatar_select">';

												var options = avatar_sections("foot");
												for (var i = 0; i < options.length; i++) {
													display += "<option value='" + options[i] + "'>" + options[i] + "</option>";
												}

										display += '</select><span class="transparenttext">•</span><select id="select.right_foot" class="avatar_select">';

												var options = avatar_sections("foot");
												for (var i = 0; i < options.length; i++) {
													display += "<option value='" + options[i] + "'>" + options[i] + "</option>";
												}

										display += '</select><span class="transparenttext">••••</span>\
									</div>';

									display || "";
								}
							%>
						</div>
						<span class="whitetext">;</span>
					</div>
					<% 
						if ((session.user !== null) && (session.user.id === data.user.id)) {
							var display = '<div class="section" id="avatar_color" style="display: none; color: ' + (data.avatar.color || 'var(--white)') + '">\
								<span class="whitetext">.color</span><span class="redtext"> = </span><select>\
									<option value="var(--white)">white</option>\
									<option value="var(--red)">red</option>\
									<option value="var(--orange)">orange</option>\
									<option value="var(--yellow)">yellow</option>\
									<option value="var(--green)">green</option>\
									<option value="var(--blue)">blue</option>\
									<option value="var(--purple)">purple</option>\
									<option value="var(--gray)">gray</option>\
								</select><span class="whitetext">;</span>\
							</div>';

							display = display.replace('"' + data.avatar.color + '"', '"' + data.avatar.color + '"' + " selected");

							display;
						}
					%>
				</div>
				<span class="glyphicon glyphicon-chevron-down section-toggle section-toggle-down whitetext"></span>
				<hr>
				<div class="megasection">
					<div class="section">
						<span class="whitetext">.</span><span class="greentext">code</span><span class="redtext"> = </span><span class="bluetext">function</span><span class="whitetext">(</span><span class="orangetext">arena</span><span class="whitetext">) {</span><% message %>
						<div class="indented">
							<div class="field_frame">
								<span class="whitetext field" id="code" value='<% data.code.replace(/\"/g, "&#34;").replace(/\'/g, "&#39;") || null %>'><% data.code || "<span class='graytext'>//</span>" %></span>
							</div>
						</div>
						<span class="whitetext">};</span>
					</div>
				</div>
			</div>
		</div>
	</body>
</html>